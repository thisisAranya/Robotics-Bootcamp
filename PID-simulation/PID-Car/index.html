<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Advanced PID Controller Simulation (Enhanced)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="main-container">

    <div id="simulation-container">
        <h1> PID Controller Simulation for a Line Following Car </h1>
        <canvas id="roadCanvas"></canvas>
        <div id="info-plots-container">
            <div class="data-display">
                <div class="data-item"><span>Cross-Track Error</span><span id="errorVal">0.00</span></div>
                <div class="data-item" style="color: var(--green)"><span>P Term (Proportional)</span><span id="pVal">0.00</span></div>
                <div class="data-item" style="color: var(--orange)"><span>I Term (Integral)</span><span id="iVal">0.00</span></div>
                <div class="data-item" style="color: var(--red)"><span>D Term (Derivative)</span><span id="dVal">0.00</span></div>
                <div class="data-item" style="border-top: 1px solid var(--border-color); padding-top: 12px;"><span>Total Correction</span><span id="corrVal">0.00</span></div>
                <div class="data-item"><span>Integral Windup <span id="windupStatus" class="status-indicator status-good"></span></span><span id="windupVal">0%</span></div>
            </div>
            <canvas id="graphCanvas"></canvas>
        </div>
    </div>

    <div class="controls">
        <div class="control-card">
            <h2>Simulation Controls</h2>
            <div class="slider-group">
                <label for="speedSlider">Car Speed: <output id="speedVal">4</output></label>
                <input type="range" id="speedSlider" min="1" max="10" step="0.5" value="4" class="range-slider"/>
            </div>
            <div class="button-group" style="grid-template-columns: 1fr 1fr 1fr;">
                <button id="startBtn">▶ Start</button>
                <button id="pauseBtn">❚❚ Pause</button>
                <button id="resetBtn">↻ Reset</button>
            </div>
        </div>
        
        <div class="control-card">
            <h2>PID Tuning (K<sub>p</sub>, K<sub>i</sub>, K<sub>d</sub>)</h2>
            <div class="slider-group">
                <label>K<sub>p</sub> (Proportional): <output id="kpVal">0.1</output></label>
                <input type="range" id="kpSlider" min="0" max="10" step="0.01" value="0.4" class="range-slider"/>
            </div>
            <div class="slider-group">
                <label>K<sub>i</sub> (Integral): <output id="kiVal">0.008</output></label>
                <input type="range" id="kiSlider" min="0" max="0.5" step="0.001" value="0.001" class="range-slider"/>
            </div>
            <div class="slider-group">
                <label>K<sub>d</sub> (Derivative): <output id="kdVal">0.8</output></label>
                <input type="range" id="kdSlider" min="0" max="5" step="0.05" value="0.5" class="range-slider"/>
            </div>
        </div>

        <div class="control-card">
            <h2>Path Selection</h2>
            <div class="slider-group">
                <label for="pathSelect">Road Path Type:</label>
                <select id="pathSelect">
                    <option value="sine">Sinusoidal (Default)</option>
                    <option value="straight">Straight Line</option>
                    <option value="circle">Circular Track</option>
                    <option value="rectangle">Rectangular Track</option>
                </select>
            </div>
            <div class="slider-group">
                <label>Path Scale: <output id="scaleVal">1.0</output></label>
                <input type="range" id="scaleSlider" min="0.5" max="3" step="0.1" value="1.0" class="range-slider"/>
            </div>
        </div>

        <div class="preset-and-help-group">
            <div class="control-card">
                <h2>Tuning Presets</h2>
                <div class="presets-group">
                    <button id="presetP">P-Only</button>
                    <button id="presetPI">PI</button>
                    <button id="presetPID">PID</button>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="js/script.js"></script>
</body>
</html>
